pr:
- master

resources:
- repo: self

stages:
- stage: Deck_Ping
  displayName: Deck Ping for Kong
  jobs:
  - template: /action.yaml
    parameters:
      command: ping
      options: kong-addr https://heroku-kong-pjanicked.herokuapp.com/kong-admin
      
- stage: Deck_Validate
  displayName: Deck Validate for Kong
  jobs:
  - template: /action.yaml
    parameters:
      command: validate
      options: kong-addr https://heroku-kong-pjanicked.herokuapp.com/kong-admin
      kong_workspaces: kong
      
- stage: Deck_Diff
  displayName: Deck Diff for Kong
  jobs:
  - template: /action.yaml
    parameters:
      command: diff
      options: kong-addr https://heroku-kong-pjanicked.herokuapp.com/kong-admin
      kong_workspaces: kong